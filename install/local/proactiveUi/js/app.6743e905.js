(function(){var e={5358:function(e,a,l){var t={"./af":2190,"./af.js":2190,"./ar":7218,"./ar-dz":5785,"./ar-dz.js":5785,"./ar-kw":9417,"./ar-kw.js":9417,"./ar-ly":6904,"./ar-ly.js":6904,"./ar-ma":8617,"./ar-ma.js":8617,"./ar-ps":1318,"./ar-ps.js":1318,"./ar-sa":2699,"./ar-sa.js":2699,"./ar-tn":6789,"./ar-tn.js":6789,"./ar.js":7218,"./az":3050,"./az.js":3050,"./be":8316,"./be.js":8316,"./bg":310,"./bg.js":310,"./bm":8884,"./bm.js":8884,"./bn":3469,"./bn-bd":6672,"./bn-bd.js":6672,"./bn.js":3469,"./bo":9118,"./bo.js":9118,"./br":3113,"./br.js":3113,"./bs":3626,"./bs.js":3626,"./ca":921,"./ca.js":921,"./cs":7799,"./cs.js":7799,"./cv":2828,"./cv.js":2828,"./cy":3521,"./cy.js":3521,"./da":6962,"./da.js":6962,"./de":3294,"./de-at":6158,"./de-at.js":6158,"./de-ch":5960,"./de-ch.js":5960,"./de.js":3294,"./dv":7963,"./dv.js":7963,"./el":3432,"./el.js":3432,"./en-au":998,"./en-au.js":998,"./en-ca":5931,"./en-ca.js":5931,"./en-gb":5930,"./en-gb.js":5930,"./en-ie":8081,"./en-ie.js":8081,"./en-il":1594,"./en-il.js":1594,"./en-in":3904,"./en-in.js":3904,"./en-nz":1507,"./en-nz.js":1507,"./en-sg":9409,"./en-sg.js":9409,"./eo":2177,"./eo.js":2177,"./es":4805,"./es-do":9155,"./es-do.js":9155,"./es-mx":9791,"./es-mx.js":9791,"./es-us":6098,"./es-us.js":6098,"./es.js":4805,"./et":6240,"./et.js":6240,"./eu":391,"./eu.js":391,"./fa":612,"./fa.js":612,"./fi":4220,"./fi.js":4220,"./fil":5570,"./fil.js":5570,"./fo":5466,"./fo.js":5466,"./fr":4461,"./fr-ca":6306,"./fr-ca.js":6306,"./fr-ch":7081,"./fr-ch.js":7081,"./fr.js":4461,"./fy":3484,"./fy.js":3484,"./ga":6957,"./ga.js":6957,"./gd":2978,"./gd.js":2978,"./gl":9866,"./gl.js":9866,"./gom-deva":5011,"./gom-deva.js":5011,"./gom-latn":4724,"./gom-latn.js":4724,"./gu":1601,"./gu.js":1601,"./he":9802,"./he.js":9802,"./hi":9358,"./hi.js":9358,"./hr":3907,"./hr.js":3907,"./hu":218,"./hu.js":218,"./hy-am":533,"./hy-am.js":533,"./id":2844,"./id.js":2844,"./is":7353,"./is.js":7353,"./it":6364,"./it-ch":774,"./it-ch.js":774,"./it.js":6364,"./ja":6008,"./ja.js":6008,"./jv":8221,"./jv.js":8221,"./ka":2417,"./ka.js":2417,"./kk":2071,"./kk.js":2071,"./km":6149,"./km.js":6149,"./kn":4572,"./kn.js":4572,"./ko":659,"./ko.js":659,"./ku":6285,"./ku-kmr":9398,"./ku-kmr.js":9398,"./ku.js":6285,"./ky":1609,"./ky.js":1609,"./lb":119,"./lb.js":119,"./lo":1748,"./lo.js":1748,"./lt":1973,"./lt.js":1973,"./lv":1347,"./lv.js":1347,"./me":3023,"./me.js":3023,"./mi":5747,"./mi.js":5747,"./mk":4341,"./mk.js":4341,"./ml":3840,"./ml.js":3840,"./mn":2058,"./mn.js":2058,"./mr":9182,"./mr.js":9182,"./ms":5197,"./ms-my":9136,"./ms-my.js":9136,"./ms.js":5197,"./mt":6408,"./mt.js":6408,"./my":1683,"./my.js":1683,"./nb":3141,"./nb.js":3141,"./ne":9344,"./ne.js":9344,"./nl":4703,"./nl-be":4641,"./nl-be.js":4641,"./nl.js":4703,"./nn":9873,"./nn.js":9873,"./oc-lnc":1217,"./oc-lnc.js":1217,"./pa-in":4612,"./pa-in.js":4612,"./pl":4457,"./pl.js":4457,"./pt":1089,"./pt-br":9146,"./pt-br.js":9146,"./pt.js":1089,"./ro":5950,"./ro.js":5950,"./ru":7292,"./ru.js":7292,"./sd":6774,"./sd.js":6774,"./se":7493,"./se.js":7493,"./si":3761,"./si.js":3761,"./sk":9711,"./sk.js":9711,"./sl":8558,"./sl.js":8558,"./sq":8633,"./sq.js":8633,"./sr":688,"./sr-cyrl":7903,"./sr-cyrl.js":7903,"./sr.js":688,"./ss":1991,"./ss.js":1991,"./sv":7020,"./sv.js":7020,"./sw":5891,"./sw.js":5891,"./ta":5714,"./ta.js":5714,"./te":206,"./te.js":206,"./tet":4768,"./tet.js":4768,"./tg":8276,"./tg.js":8276,"./th":7977,"./th.js":7977,"./tk":6928,"./tk.js":6928,"./tl-ph":8046,"./tl-ph.js":8046,"./tlh":1361,"./tlh.js":1361,"./tr":4367,"./tr.js":4367,"./tzl":627,"./tzl.js":627,"./tzm":2636,"./tzm-latn":8148,"./tzm-latn.js":8148,"./tzm.js":2636,"./ug-cn":8823,"./ug-cn.js":8823,"./uk":461,"./uk.js":461,"./ur":1366,"./ur.js":1366,"./uz":3454,"./uz-latn":8374,"./uz-latn.js":8374,"./uz.js":3454,"./vi":8572,"./vi.js":8572,"./x-pseudo":464,"./x-pseudo.js":464,"./yo":3709,"./yo.js":3709,"./zh-cn":5873,"./zh-cn.js":5873,"./zh-hk":7549,"./zh-hk.js":7549,"./zh-mo":2240,"./zh-mo.js":2240,"./zh-tw":405,"./zh-tw.js":405};function n(e){var a=s(e);return l(a)}function s(e){if(!l.o(t,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t[e]}n.keys=function(){return Object.keys(t)},n.resolve=s,e.exports=n,n.id=5358},2179:function(e,a,l){"use strict";var t=l(5130),n=l(6768),s=l(144),o=(l(4114),l(4232)),i=l(9005);const r=(0,i.nY)("storeProactive",{state:()=>({metrics:[],metricsCount:"",unitsTable:[],status:[],tableCheckIp:[],tableCheckIpCount:"",settings:{categoryMain:null,categoryKC:null,categoryAO:null,smartPersonalAccount:null,listCity:null,cityDay:[],defaultDay:0,dealField:{engineer:null,technicist:null},smartField:{personalAccount:null,address:null,city:null,asigned:null}},city:[],cityOptions:[],userID:""}),actions:{async getSettings(){const e=await new Promise((e=>{BX.rest.callMethod("mwsproactiverest.setting.getList",{filter:{NAME:"PROACTIVE"},select:["*"]},(a=>{e(a.data())}))}));if(e.length>0){if(e[0].SETTING_STRING){const a=JSON.parse(e[0].SETTING_STRING);this.settings={categoryMain:a.categoryMain?a.categoryMain:null,categoryKC:a.categoryKC?a.categoryKC:null,categoryAO:a.categoryAO?a.categoryAO:null,smartPersonalAccount:a.smartPersonalAccount?a.smartPersonalAccount:null,listCity:a.listCity?a.listCity:null,cityDay:a.cityDay?a.cityDay:[],defaultDay:a.defaultDay?a.defaultDay:0,dealField:{engineer:a.dealField&&a.dealField.engineer?a.dealField.engineer:null,technicist:a.dealField&&a.dealField.technicist?a.dealField.technicist:null},smartField:{personalAccount:a.smartField&&a.smartField.personalAccount?a.smartField.personalAccount:null,address:a.smartField&&a.smartField.address?a.smartField.address:null,city:a.smartField&&a.smartField.city?a.smartField.city:null,asigned:a.smartField&&a.smartField.asigned?a.smartField.asigned:null}}}console.log(this.settings)}},async getCurrent(){const e=await new Promise((e=>{BX.rest.callMethod("user.current",{},(a=>{e(a.data())}))}));this.userID=e.ID},async loadStatusProactive(){const e=await new Promise((e=>{BX.rest.callMethod("mwsproactiverest.abonentStatus.getList",{select:["*"]},(a=>{e(a.data())}))}));this.status=e},async loadMainTable(e,a){const l=await new Promise((l=>{BX.rest.callMethod("mwsproactive.ui.proactiveTableUi",{enID:this.settings.smartPersonalAccount.ID,filter:e||[],limited:a||[]},(e=>{l(e.data())}))}));this.metrics=l.abonent,this.metricsCount=l.totalRecords},async loadUnits(e,a){this.unitsTable=[];const l=await new Promise((l=>{BX.rest.callMethod("mwsproactiverest.metricunit.getList",{filter:{ABONENT_ID:e,METRIC_ASUO:a},select:["*"]},(e=>{l(e.data())}))}));this.unitsTable=l},async createDeal(e,a){const l=await new Promise((l=>{BX.rest.callMethod("mwsproactive.ui.proactiveSetDeal",{lkId:e,abonentId:a},(e=>{l(e.data())}))}));return l},async getCheckIp(e,a){const l=await new Promise((l=>{BX.rest.callMethod("mwsproactiverest.ipcheck.getList",{enID:this.settings.smartPersonalAccount.ID,filter:e||[],limited:a||[]},(e=>{l(e.data())}))}));this.tableCheckIp=l.ip,this.tableCheckIpCount=l.totalRecords},async getCity(){const e=await new Promise((e=>{BX.rest.callMethod("mwsproactiverest.list.getElements",{ID:this.settings.listCity.ID},(a=>{e(a.data())}))}));e.forEach((e=>{this.city[e.ID]=e.NAME})),this.cityOptions=e}},getters:{getMetrics(e){return e.metrics},getUnitsTable(e){return e.unitsTable},getStatus(e){return e.status}}});var u=l(9148),d=l.n(u);const c={class:"flex flex-column gap-3"},m={class:"flex flex-wrap align-items-center justify-content-start gap-2"},p={class:"flex flex-column flex-nowrap gap-2"},v=(0,n.Lk)("div",null,"Лицевой счет",-1),f={class:"flex flex-column flex-nowrap gap-2"},b=(0,n.Lk)("div",null,"IP - адрес",-1),h={class:"flex flex-column flex-nowrap gap-2"},k=(0,n.Lk)("div",null,"Город",-1),g={class:"flex flex-column flex-nowrap gap-2"},_=(0,n.Lk)("div",null,"Статус",-1),y={class:"flex flex-wrap align-items-center justify-content-end gap-3"},j=(0,n.Lk)("div",null,"Лицевой счет",-1),A=(0,n.Lk)("span",null,"Заявка",-1),w=["onClick"],T={class:"flex flex-wrap justify-content-end"};var D={__name:"ProactiveUI",setup(e){const a=r(),l=(0,i.bP)(a),u=(0,s.KR)([]),d=(0,s.KR)(!1),D=(0,s.KR)(""),L=(0,s.KR)(),I=(0,s.KR)(),E=(0,s.KR)(),C=(0,s.KR)(),F=()=>{L.value=null,I.value=null,E.value=null,C.value=null},R=async()=>{var e=[];I.value&&e.push({"LK.UF_CRM_5_CITY_LIST":I.value}),L.value&&e.push({"LK.UF_CRM_5_LS_NUMBER":L.value}),E.value&&e.push({STATUS_ID:E.value}),C.value&&e.push({IP:C.value}),await a.loadMainTable(e)},M=async(e,l,t)=>{d.value=!0,D.value=t,await a.loadUnits(e,l)},S=async e=>{console.log(e);const l=await a.createDeal(e.LK_ID,e.ID);e.DEAL_ID=l,BX.SidePanel.Instance.open("/crm/deal/details/"+l+"/",{width:1480}),console.log(l)},x=e=>{e>0&&BX.SidePanel.Instance.open("/crm/deal/details/"+e+"/",{width:1480})},P=async e=>{await new Promise((a=>{BX.rest.callMethod("mwsproactiverest.abonen.update",{ID:e.ID,fields:e},(e=>{a(e.data())}))}))},O=async e=>{var l=[];I.value&&l.push({"LK.UF_CRM_5_CITY_LIST":I.value}),L.value&&l.push({"LK.UF_CRM_5_LS_NUMBER":L.value}),E.value&&l.push({STATUS_ID:E.value}),C.value&&l.push({IP:C.value});var t={limit:e.rows,page:e.page};await a.loadMainTable(l,t)};return(0,n.sV)((async()=>{await a.loadStatusProactive(),await a.loadMainTable()})),(e,i)=>{const r=(0,n.g2)("InputText"),U=(0,n.g2)("Dropdown"),N=(0,n.g2)("Button"),V=(0,n.g2)("AccordionTab"),Y=(0,n.g2)("Accordion"),K=(0,n.g2)("Column"),W=(0,n.g2)("DataTable"),z=(0,n.g2)("Dialog");return(0,n.uX)(),(0,n.CE)("div",c,[(0,n.bF)(Y,null,{default:(0,n.k6)((()=>[(0,n.bF)(V,{header:"Фильтр"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",m,[(0,n.Lk)("div",p,[v,(0,n.bF)(r,{modelValue:L.value,"onUpdate:modelValue":i[0]||(i[0]=e=>L.value=e),placeholder:"Лицевой счет",class:"w-full md:w-14rem"},null,8,["modelValue"])]),(0,n.Lk)("div",f,[b,(0,n.bF)(r,{modelValue:C.value,"onUpdate:modelValue":i[1]||(i[1]=e=>C.value=e),placeholder:"IP - адрес",class:"w-full md:w-14rem"},null,8,["modelValue"])]),(0,n.Lk)("div",h,[k,(0,n.bF)(U,{modelValue:I.value,"onUpdate:modelValue":i[2]||(i[2]=e=>I.value=e),options:(0,s.R1)(l).cityOptions.value,optionLabel:"NAME",optionValue:"ID",class:"w-full md:w-14rem"},null,8,["modelValue","options"])]),(0,n.Lk)("div",g,[_,(0,n.bF)(U,{modelValue:E.value,"onUpdate:modelValue":i[3]||(i[3]=e=>E.value=e),options:(0,s.R1)(l).status.value,optionLabel:"NAME",optionValue:"ID",class:"w-full md:w-14rem"},null,8,["modelValue","options"])])]),(0,n.Lk)("div",y,[(0,n.bF)(N,{text:"",label:"Очистить",onClick:i[4]||(i[4]=e=>F())}),(0,n.bF)(N,{label:"Показать",onClick:i[5]||(i[5]=e=>R()),onKeydown:i[6]||(i[6]=(0,t.jR)((e=>R()),["enter"]))})])])),_:1})])),_:1}),(0,s.R1)(a).getMetrics?((0,n.uX)(),(0,n.Wv)(W,{key:0,lazy:"",expandedRows:u.value,"onUpdate:expandedRows":i[7]||(i[7]=e=>u.value=e),sortOrder:-1,value:(0,s.R1)(a).getMetrics,paginator:"",rows:10,totalRecords:Number((0,s.R1)(l).metricsCount.value),rowsPerPageOptions:[5,10,20,50],onPage:i[8]||(i[8]=e=>O(e)),dataKey:"ID",tableStyle:"min-width: 60rem"},{expansion:(0,n.k6)((e=>[(0,n.bF)(W,{value:e.data.METRIC,size:"small"},{default:(0,n.k6)((()=>[(0,n.bF)(K,{field:"NAME"},{header:(0,n.k6)((()=>[(0,n.eW)(" Название метрики ")])),body:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,o.v_)(e.data.NAME),1)])),_:2},1024),(0,n.bF)(K,{field:"LAST_DATE"},{header:(0,n.k6)((()=>[(0,n.eW)(" Последняя проверка ")])),body:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,o.v_)(e.data.LAST_DATE),1)])),_:2},1024),(0,n.bF)(K,{field:"COUNT"},{header:(0,n.k6)((()=>[(0,n.eW)(" Колличество отклонений ")])),body:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,o.v_)(e.data.COUNT),1)])),_:2},1024),(0,n.bF)(K,{field:"LAST_METRIC"},{header:(0,n.k6)((()=>[(0,n.eW)(" Текущее значение ")])),body:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,o.v_)(e.data.LAST_METRIC),1)])),_:2},1024),(0,n.bF)(K,{field:"history"},{header:(0,n.k6)((()=>[(0,n.eW)(" История ")])),body:(0,n.k6)((e=>[(0,n.bF)(N,{label:"Посмотреть",link:"",onClick:a=>M(e.data.ABONENT_ID,e.data.METRIC_ASUO,e.data.NAME)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["value"])])),default:(0,n.k6)((()=>[(0,n.bF)(K,{expander:"",style:{width:"5rem"}}),(0,n.bF)(K,{field:"ABONENT"},{header:(0,n.k6)((()=>[j])),body:(0,n.k6)((e=>[(0,n.eW)((0,o.v_)(e.data.ABONENT),1)])),_:1}),(0,n.bF)(K,{field:"IP"},{header:(0,n.k6)((()=>[(0,n.eW)(" IP - адрес узла ")])),body:(0,n.k6)((e=>[(0,n.eW)((0,o.v_)(e.data.IP),1)])),_:1}),(0,n.bF)(K,{field:"PORT"},{header:(0,n.k6)((()=>[(0,n.eW)(" Порт узла ")])),body:(0,n.k6)((e=>[(0,n.eW)((0,o.v_)(e.data.PORT),1)])),_:1}),(0,n.bF)(K,{field:"DROP_METRIC"},{header:(0,n.k6)((()=>[(0,n.eW)(" Отклонение Метрик ")])),body:(0,n.k6)((e=>[(0,n.eW)((0,o.v_)(e.data.DROP_METRIC),1)])),_:1}),(0,n.bF)(K,{field:"abonentAddress"},{header:(0,n.k6)((()=>[(0,n.eW)(" Адрес подключения ")])),body:(0,n.k6)((e=>[(0,n.eW)((0,o.v_)(e.data.abonentAddress),1)])),_:1}),(0,n.bF)(K,{sortable:"",field:"STATUS_ID"},{header:(0,n.k6)((()=>[(0,n.eW)(" Статус ")])),body:(0,n.k6)((e=>[(0,n.bF)(U,{modelValue:e.data.STATUS_ID,"onUpdate:modelValue":a=>e.data.STATUS_ID=a,options:(0,s.R1)(a).getStatus,optionLabel:"NAME","option-value":"ID",checkmark:"",highlightOnSelect:!1,class:"w-full md:w-14rem",onChange:a=>P(e.data)},null,8,["modelValue","onUpdate:modelValue","options","onChange"])])),_:1}),(0,n.bF)(K,{field:"DEAL_ID"},{header:(0,n.k6)((()=>[A])),body:(0,n.k6)((e=>[(0,n.Lk)("span",{onClick:a=>x(e.data.DEAL_ID>0?e.data.DEAL_ID:"")},(0,o.v_)(e.data.DEAL_ID>0?e.data.DEAL_ID:""),9,w)])),_:1}),(0,n.bF)(K,{style:{width:"5rem"}},{header:(0,n.k6)((()=>[])),body:(0,n.k6)((e=>[(0,n.Lk)("div",T,[(0,n.bF)(N,{icon:"pi pi-file-edit",size:"small",text:"",onClick:a=>S(e.data)},null,8,["onClick"])])])),_:1})])),_:1},8,["expandedRows","value","totalRecords"])):(0,n.Q3)("",!0),(0,n.bF)(z,{visible:d.value,"onUpdate:visible":i[9]||(i[9]=e=>d.value=e),header:"Метрика "+D.value,style:{width:"50rem"},modal:!0,draggable:!1},{default:(0,n.k6)((()=>[(0,n.bF)(W,{value:(0,s.R1)(a).getUnitsTable,size:"small"},{default:(0,n.k6)((()=>[(0,n.bF)(K,{field:"DATE_CREATE"},{header:(0,n.k6)((()=>[(0,n.eW)(" Дата проверки ")])),body:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,o.v_)(e.data.DATE_CREATE),1)])),_:1}),(0,n.bF)(K,{field:"NEW_VALUE"},{header:(0,n.k6)((()=>[(0,n.eW)(" Текущее значение ")])),body:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,o.v_)(e.data.NEW_VALUE),1)])),_:1}),(0,n.bF)(K,{field:"NEW_VALUE"},{header:(0,n.k6)((()=>[(0,n.eW)(" Старое значение ")])),body:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,o.v_)(e.data.OLD_VALUE),1)])),_:1}),(0,n.bF)(K,{field:"DIFF_VALUE"},{header:(0,n.k6)((()=>[(0,n.eW)(" Разница ")])),body:(0,n.k6)((e=>[(0,n.Lk)("span",null,(0,o.v_)(e.data.DIFF_VALUE?e.data.DIFF_VALUE:""),1)])),_:1})])),_:1},8,["value"])])),_:1},8,["visible","header"])])}}};const L=D;var I=L;function E(e,a){return(0,n.uX)(),(0,n.CE)("h1",null,"Секция в разработке")}var C=l(1241);const F={},R=(0,C.A)(F,[["render",E]]);var M=R,S=l(2151);const x=e=>((0,n.Qi)("data-v-081e20d0"),e=e(),(0,n.jt)(),e),P={class:"flex flex-column gap-3"},O={class:"flex flex-wrap align-items-center justify-content-start gap-2"},U={class:"flex flex-column flex-nowrap gap-2"},N=x((()=>(0,n.Lk)("div",null,"Дата создания",-1))),V={class:"flex flex-column flex-nowrap gap-2"},Y=x((()=>(0,n.Lk)("div",null,"Дата закрытия",-1))),K={class:"flex flex-column flex-nowrap gap-2"},W=x((()=>(0,n.Lk)("div",null,"Лицевой счет",-1))),z={class:"flex flex-column flex-nowrap gap-2"},B=x((()=>(0,n.Lk)("div",null,"IP - адрес",-1))),X={class:"flex flex-column flex-nowrap gap-2"},G=x((()=>(0,n.Lk)("div",null,"Город",-1))),Q={class:"flex flex-column flex-nowrap gap-2"},q=x((()=>(0,n.Lk)("div",null,"Статус",-1))),H={class:"flex flex-wrap align-items-center justify-content-end gap-3"},J=x((()=>(0,n.Lk)("div",null,"Дата",-1))),Z=x((()=>(0,n.Lk)("div",null,"Дата освобождения",-1))),$=x((()=>(0,n.Lk)("div",null,"Исполнитель",-1))),ee=["onClick"],ae=x((()=>(0,n.Lk)("div",null,"Лицевой счет",-1))),le=["onClick"],te=x((()=>(0,n.Lk)("div",null,"Ф.И.О",-1))),ne=["onClick"],se=x((()=>(0,n.Lk)("div",null,"Город",-1))),oe=x((()=>(0,n.Lk)("div",null,"IP-адрес",-1))),ie=x((()=>(0,n.Lk)("div",null,"Порт",-1))),re=x((()=>(0,n.Lk)("div",null,"Шлюз",-1))),ue=x((()=>(0,n.Lk)("div",null,"Статус",-1))),de={class:"flex flex-row flex-nowrap gap-2"},ce=x((()=>(0,n.Lk)("span",null,"Выбирете действие:",-1)));var me={__name:"ClearIp",setup(e){const a=(0,S.d)(),l=r(),u=(0,i.bP)(l),c=(0,s.KR)([]),m=(0,s.KR)(),p=(0,s.KR)(),v=(0,s.KR)(),f=(0,s.KR)(),b=(0,s.KR)(),h=(0,s.KR)(),k=(0,s.KR)(),g=(0,s.KR)([{id:1,name:"Удалить"},{id:2,name:"Освободить"}]),_=(0,s.KR)([{id:1,name:"Новая"},{id:2,name:"Освобожденно"}]),y=(0,s.KR)([]),j=(e,l)=>{e?BX.SidePanel.Instance.open(" /crm/company/details/"+e+"/"):a.add({severity:"info",summary:"В базе не найден клиент:",detail:l,group:"tr",life:3e3})},A=(e,l)=>{e?BX.SidePanel.Instance.open("/crm/type/"+u.settings.value.smartPersonalAccount.ID+"/details/"+e+"/"):a.add({severity:"info",summary:"В базе не найден Лицевой счет:",detail:l,group:"tr",life:3e3})},w=(e,l)=>{e?BX.SidePanel.Instance.open("/company/personal/user/"+e+"/"):a.add({severity:"info",summary:"В базе не найден Пользователь:",detail:l,group:"tr",life:3e3})},T=()=>{p.value=null,v.value=null,f.value=null,b.value=null,h.value=null,k.value=null},D=async()=>{var e=[];p.value&&(e.push({">=DATE_CREATE":d()(p.value[0]).format("DD.MM.YYYY")+" 00:00:00"}),e.push({"<=DATE_CREATE":d()(p.value[1]).format("DD.MM.YYYY")+" 23:59:59"})),v.value&&(e.push({">=DATE_CLOSED":d()(v.value[0]).format("DD.MM.YYYY")+" 00:00:00"}),e.push({"<=DATE_CLOSED":d()(v.value[1]).format("DD.MM.YYYY")+" 23:59:59"})),b.value&&e.push({"LK.UF_CRM_5_CITY_LIST":b.value}),f.value&&e.push({"LK.UF_CRM_5_LS_NUMBER":f.value}),h.value&&e.push({STATUS_ID:h.value}),k.value&&e.push({IP_ADDRESS:k.value}),await l.getCheckIp(e)},L=async()=>{if(2==m.value.id){const e=await new Promise((e=>{BX.rest.callMethod("mwsproactiverest.ipcheck.ipReleases",{userId:u.userID.value,elements:c.value},(a=>{e(a.data())}))}));"OK"==e&&(c.value=[],await D())}else a.add({severity:"info",summary:"Удаление пока не реализованно:",detail:"Неизвестно нужно ли оно или нет",group:"tr",life:3e3})},I=async e=>{var a=[];p.value&&(a.push({">=DATE_CREATE":d()(p.value[0]).format("DD.MM.YYYY")+" 00:00:00"}),a.push({"<=DATE_CREATE":d()(p.value[1]).format("DD.MM.YYYY")+" 23:59:59"})),v.value&&(a.push({">=DATE_CLOSED":d()(v.value[0]).format("DD.MM.YYYY")+" 00:00:00"}),a.push({"<=DATE_CLOSED":d()(v.value[1]).format("DD.MM.YYYY")+" 23:59:59"})),b.value&&a.push({"LK.UF_CRM_5_CITY_LIST":b.value}),f.value&&a.push({"LK.UF_CRM_5_LS_NUMBER":f.value}),h.value&&a.push({STATUS_ID:h.value}),k.value&&a.push({IP_ADDRESS:k.value});var t={limit:e.rows,page:e.page};await l.getCheckIp(a,t)};return(0,n.sV)((async()=>{await l.getCheckIp(),_.value.forEach((e=>{y.value[e.id]=e.name}))})),(e,a)=>{const l=(0,n.g2)("Calendar"),i=(0,n.g2)("InputText"),r=(0,n.g2)("Dropdown"),d=(0,n.g2)("Button"),E=(0,n.g2)("AccordionTab"),C=(0,n.g2)("Accordion"),F=(0,n.g2)("Column"),R=(0,n.g2)("DataTable"),M=(0,n.g2)("Toast");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",P,[(0,n.bF)(C,null,{default:(0,n.k6)((()=>[(0,n.bF)(E,{header:"Фильтр"},{default:(0,n.k6)((()=>[(0,n.Lk)("div",O,[(0,n.Lk)("div",U,[N,(0,n.bF)(l,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),selectionMode:"range",manualInput:!1,placeholder:"Дата создания",class:"w-full md:w-14rem"},null,8,["modelValue"])]),(0,n.Lk)("div",V,[Y,(0,n.bF)(l,{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=e=>v.value=e),selectionMode:"range",manualInput:!1,placeholder:"Дата закрытия",class:"w-full md:w-14rem"},null,8,["modelValue"])]),(0,n.Lk)("div",K,[W,(0,n.bF)(i,{modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=e=>f.value=e),placeholder:"Лицевой счет",class:"w-full md:w-14rem"},null,8,["modelValue"])]),(0,n.Lk)("div",z,[B,(0,n.bF)(i,{modelValue:k.value,"onUpdate:modelValue":a[3]||(a[3]=e=>k.value=e),placeholder:"IP - адрес",class:"w-full md:w-14rem"},null,8,["modelValue"])]),(0,n.Lk)("div",X,[G,(0,n.bF)(r,{modelValue:b.value,"onUpdate:modelValue":a[4]||(a[4]=e=>b.value=e),options:(0,s.R1)(u).cityOptions.value,optionLabel:"NAME",optionValue:"ID",class:"w-full md:w-14rem"},null,8,["modelValue","options"])]),(0,n.Lk)("div",Q,[q,(0,n.bF)(r,{modelValue:h.value,"onUpdate:modelValue":a[5]||(a[5]=e=>h.value=e),options:_.value,optionLabel:"name",optionValue:"id",class:"w-full md:w-14rem"},null,8,["modelValue","options"])])]),(0,n.Lk)("div",H,[(0,n.bF)(d,{text:"",label:"Очистить",onClick:a[6]||(a[6]=e=>T())}),(0,n.bF)(d,{label:"Показать",onClick:a[7]||(a[7]=e=>D()),onKeydown:a[8]||(a[8]=(0,t.jR)((e=>D()),["enter"]))})])])),_:1})])),_:1}),(0,n.bF)(R,{selection:c.value,"onUpdate:selection":a[11]||(a[11]=e=>c.value=e),sortOrder:-1,value:(0,s.R1)(u).tableCheckIp.value,lazy:"",dataKey:"ID",paginator:"",rows:10,totalRecords:Number((0,s.R1)(u).tableCheckIpCount.value),rowsPerPageOptions:[5,10,20,50],onPage:a[12]||(a[12]=e=>I(e)),tableStyle:"min-width: 60rem"},{footer:(0,n.k6)((()=>[(0,n.Lk)("div",de,[ce,(0,n.bF)(r,{modelValue:m.value,"onUpdate:modelValue":a[9]||(a[9]=e=>m.value=e),options:g.value,optionLabel:"name",placeholder:"Действие",class:"w-full md:w-14rem"},null,8,["modelValue","options"]),(0,n.bF)(d,{onClick:a[10]||(a[10]=e=>L())},{default:(0,n.k6)((()=>[(0,n.eW)("Выполнить")])),_:1})])])),default:(0,n.k6)((()=>[(0,n.bF)(F,{selectionMode:"multiple",headerStyle:"width: 3rem"}),(0,n.bF)(F,{field:"DATE_CREATE"},{header:(0,n.k6)((()=>[J])),body:(0,n.k6)((e=>[(0,n.eW)((0,o.v_)(e.data.DATE_CREATE),1)])),_:1}),(0,n.bF)(F,{field:"DATE_CLOSED"},{header:(0,n.k6)((()=>[Z])),body:(0,n.k6)((e=>[(0,n.eW)((0,o.v_)(e.data.DATE_CLOSED),1)])),_:1}),(0,n.bF)(F,{field:"USER_NAME"},{header:(0,n.k6)((()=>[$])),body:(0,n.k6)((e=>[(0,n.Lk)("span",{class:"elem_pointer",onClick:a=>w(e.data.USER_ID,e.data.USER_NAME)},(0,o.v_)(e.data.USER_NAME),9,ee)])),_:1}),(0,n.bF)(F,{field:"PERSONAL_ACCOUNT"},{header:(0,n.k6)((()=>[ae])),body:(0,n.k6)((e=>[(0,n.Lk)("span",{class:"elem_pointer",onClick:a=>A(e.data.LK_ID,e.data.PERSONAL_ACCOUNT)},(0,o.v_)(e.data.PERSONAL_ACCOUNT),9,le)])),_:1}),(0,n.bF)(F,{field:"PESONAL_DATA"},{header:(0,n.k6)((()=>[te])),body:(0,n.k6)((e=>[(0,n.Lk)("span",{class:"elem_pointer",onClick:a=>j(e.data.LK_COMPANY_ID,e.data.PESONAL_DATA)},(0,o.v_)(e.data.PESONAL_DATA),9,ne)])),_:1}),(0,n.bF)(F,{field:"LK_CITY"},{header:(0,n.k6)((()=>[se])),body:(0,n.k6)((e=>[(0,n.eW)((0,o.v_)(e.data.LK_CITY?(0,s.R1)(u).city.value[e.data.LK_CITY]:""),1)])),_:1}),(0,n.bF)(F,{field:"IP_ADDRESS"},{header:(0,n.k6)((()=>[oe])),body:(0,n.k6)((e=>[(0,n.eW)((0,o.v_)(e.data.IP_ADDRESS),1)])),_:1}),(0,n.bF)(F,{field:"PORT"},{header:(0,n.k6)((()=>[ie])),body:(0,n.k6)((e=>[(0,n.eW)((0,o.v_)(e.data.PORT),1)])),_:1}),(0,n.bF)(F,{field:"GATEWAY"},{header:(0,n.k6)((()=>[re])),body:(0,n.k6)((e=>[(0,n.eW)((0,o.v_)(e.data.GATEWAY),1)])),_:1}),(0,n.bF)(F,{field:"STATUS_ID"},{header:(0,n.k6)((()=>[ue])),body:(0,n.k6)((e=>[(0,n.eW)((0,o.v_)(y.value[e.data.STATUS_ID]),1)])),_:1})])),_:1},8,["selection","value","totalRecords"])]),(0,n.bF)(M,{position:"top-right",group:"tr"})],64)}}};const pe=(0,C.A)(me,[["__scopeId","data-v-081e20d0"]]);var ve=pe;const fe={class:"p-3"};var be={__name:"App",setup(e){const a=r(),l=(0,i.bP)(a),t=(0,s.KR)(0),o=(0,s.KR)([{label:"Проактивный Сервис",icon:"pi pi-home"},{label:"Аварии / ППР",icon:"pi pi-chart-line"},{label:"Освобождение IP",icon:"pi pi-warehouse"}]);return(0,n.sV)((async()=>{await a.getSettings(),await a.getCurrent(),await a.getCity()})),(e,a)=>{const i=(0,n.g2)("TabMenu"),r=(0,n.g2)("TabPanel");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(i,{activeIndex:t.value,"onUpdate:activeIndex":a[0]||(a[0]=e=>t.value=e),model:o.value},null,8,["activeIndex","model"]),(0,n.Lk)("div",fe,[(0,n.bF)(r,null,{default:(0,n.k6)((()=>[0==t.value&&(0,s.R1)(l).settings.smartPersonalAccount.ID?((0,n.uX)(),(0,n.Wv)((0,s.R1)(I),{key:0})):(0,n.Q3)("",!0),1==t.value?((0,n.uX)(),(0,n.Wv)((0,s.R1)(M),{key:1})):(0,n.Q3)("",!0),2==t.value?((0,n.uX)(),(0,n.Wv)((0,s.R1)(ve),{key:2})):(0,n.Q3)("",!0)])),_:1})])],64)}}};const he=be;var ke=he,ge=l(9119),_e=l(6883),ye=l(2210),je=l(1414),Ae=l(5120),we=l(2894),Te=l(1651),De=l(7729),Le=l(3985),Ie=l(353),Ee=l(2211),Ce=l(593),Fe=l(1349),Re=l(6846),Me=l(9267),Se=l(1851),xe=l(1752),Pe=l(1598),Oe=l(6654),Ue=l(2002),Ne=l(3189);const Ve=(0,t.Ef)(ke),Ye=(0,i.Ey)();Ve.use(Ye),Ve.use(ge.Ay,{locale:{startsWith:"Начинается с",contains:"Содержит",notContains:"Не содержит",endsWith:"Заканчивается",equals:"Равно",notEquals:"Не равно",noFilter:"Нет фильтра",filter:"Фильтр",lt:"Меньше чем",lte:"Меньше чем или равно",gt:"Более чем",gte:"Более чем или равно",dateIs:"Дата равна",dateIsNot:"Дата не равна",dateBefore:"Дата до",dateAfter:"Дата после",custom:"Пользовательский",clear:"Очистить",apply:"Принять",matchAll:"Сопоставить все",matchAny:"Совпадение с любым",addRule:"Добавить правило",removeRule:"Удалить правило",accept:"Да",reject:"Нет",choose:"Выбрать",upload:"Загрузить",cancel:"Отмена",completed:"Завершено",pending:"В ожидании",fileSizeTypes:["Б","Кб","Мб","Гб","Тб","Пб","Эб","Зб","Йб"],dayNames:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],dayNamesShort:["Вск","Пнд","Втр","Срд","Чтв","Птн","Сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],chooseYear:"Выбрать год",chooseMonth:"Выбрать месяц",chooseDate:"Выбрать дату",prevDecade:"Предыдущее десятилетие",nextDecade:"Следующее десятилетие",prevYear:"Предыдущий год",nextYear:"Следующий год",prevMonth:"Предыдущий месяц",nextMonth:"Следующий месяц",prevHour:"Предыдущий час",nextHour:"Следующий час",prevMinute:"Предыдущая минута",nextMinute:"Следующая минута",prevSecond:"Предыдущая секунда",nextSecond:"Следующая секунда",am:"до полудня",pm:"после полудня",today:"Сегодня",now:"Сейчас",weekHeader:"Нед.",firstDayOfWeek:1,showMonthAfterYear:!1,dateFormat:"dd.mm.yy",weak:"Простой",medium:"Нормальный",strong:"Хороший",passwordPrompt:"Введите пароль",emptyFilterMessage:"Результатов не найдено",searchMessage:"{0} результатов доступно",selectionMessage:"{0} элементов выбрано",emptySelectionMessage:"Нет выбранного элемента",emptySearchMessage:"Результатов не найдено",emptyMessage:"Нет доступных вариантов",aria:{trueLabel:"Верно",falseLabel:"Неверно",nullLabel:"Не выбран",star:"1 звезда",stars:"{star} звёзд",selectAll:"Выбраны все элементы",unselectAll:"Все элементы не выбраны",close:"Закрыть",previous:"Предыдущий",next:"Следующий",navigation:"Навигация",scrollTop:"Прокрутить в начало",moveTop:"Переместить в начало",moveUp:"Переместить вверх",moveDown:"Переместить вниз",moveBottom:"Переместить в конец",moveToTarget:"Переместить в приёмник",moveToSource:"Переместить в источник",moveAllToTarget:"Переместить всё в приёмник",moveAllToSource:"Переместить всё в источник",pageLabel:"{page}",firstPageLabel:"Первая страница",lastPageLabel:"Последняя страница",nextPageLabel:"Следующая страница",previousPageLabel:"Предыдущая страница",rowsPerPageLabel:"Строк на странице",jumpToPageDropdownLabel:"Перейти к раскрывающемуся списку страниц",jumpToPageInputLabel:"Перейти к вводу страницы",selectRow:"Выбрана строка",unselectRow:"Строка не выбрана",expandRow:"Строка развёрнута",collapseRow:"Строка свёрнута",showFilterMenu:"Показать меню фильтра",hideFilterMenu:"Скрыть меню фильтра",filterOperator:"Оператор фильтра",filterConstraint:"Ограничение фильтра",editRow:"Редактирование строки",saveEdit:"Сохранить правку",cancelEdit:"Отменить правку",listView:"В виде списка",gridView:"В виде сетки",slide:"Слайд",slideNumber:"{slideNumber}",zoomImage:"Увеличить изображение",zoomIn:"Увеличить",zoomOut:"Уменьшить",rotateRight:"Повернуть вправо",rotateLeft:"Повернуть влево"}}}),Ve.use(_e.A),Ve.component("Accordion",Se.A),Ve.component("Paginator",Ne.A),Ve.component("AccordionTab",xe.A),Ve.component("TreeTable",Ce.A),Ve.component("DataTable",Fe.A),Ve.component("Column",Re.A),Ve.component("Button",Ae.A),Ve.component("Toast",we.A),Ve.component("TabPanel",je.A),Ve.component("TabView",ye.A),Ve.component("Avatar",Te.A),Ve.component("Toolbar",De.A),Ve.component("Card",Le.A),Ve.component("Panel",Ie.A),Ve.component("Dialog",Me.A),Ve.component("InputText",Ee.A),Ve.component("TabMenu",Pe.A),Ve.component("Dropdown",Oe.A),Ve.component("Calendar",Ue.A),Ve.mount("#app")}},a={};function l(t){var n=a[t];if(void 0!==n)return n.exports;var s=a[t]={id:t,loaded:!1,exports:{}};return e[t].call(s.exports,s,s.exports,l),s.loaded=!0,s.exports}l.m=e,function(){var e=[];l.O=function(a,t,n,s){if(!t){var o=1/0;for(d=0;d<e.length;d++){t=e[d][0],n=e[d][1],s=e[d][2];for(var i=!0,r=0;r<t.length;r++)(!1&s||o>=s)&&Object.keys(l.O).every((function(e){return l.O[e](t[r])}))?t.splice(r--,1):(i=!1,s<o&&(o=s));if(i){e.splice(d--,1);var u=n();void 0!==u&&(a=u)}}return a}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[t,n,s]}}(),function(){l.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(a,{a:a}),a}}(),function(){l.d=function(e,a){for(var t in a)l.o(a,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){l.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};l.O.j=function(a){return 0===e[a]};var a=function(a,t){var n,s,o=t[0],i=t[1],r=t[2],u=0;if(o.some((function(a){return 0!==e[a]}))){for(n in i)l.o(i,n)&&(l.m[n]=i[n]);if(r)var d=r(l)}for(a&&a(t);u<o.length;u++)s=o[u],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return l.O(d)},t=self["webpackChunkproactive_front"]=self["webpackChunkproactive_front"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=l.O(void 0,[504],(function(){return l(2179)}));t=l.O(t)})();
//# sourceMappingURL=app.6743e905.js.map