(function(){"use strict";var e={3192:function(e,a,t){var l=t(7764),n=t(4108),o=t(2500),r=t(9096),d=t(2312);const i=(0,d.O6)("storeProactive",{state:()=>({metrics:[],unitsTable:[]}),actions:{async loadMainTable(){const e=await new Promise((e=>{BX.rest.callMethod("mwsproactive.ui.proactiveTableUi",{},(a=>{e(a.data())}))}));this.metrics=e},async loadUnits(e,a){this.unitsTable=[];const t=await new Promise((t=>{BX.rest.callMethod("mwsproactiverest.metricunit.getList",{filter:{ABONENT_ID:e,METRIC_ASUO:a},select:["*"]},(e=>{t(e.data())}))}));this.unitsTable=t}},getters:{getMetrics(e){return e.metrics},getUnitsTable(e){return e.unitsTable}}}),s={class:"flex flex-column gap-3"},c={class:"formgrid grid"},u=(0,n.QD)("div",{class:"field col"},[(0,n.QD)("label",{for:"firstname2"},"Лицевой счет"),(0,n.QD)("input",{id:"firstname2",type:"text",class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"})],-1),f=(0,n.QD)("div",{class:"field col"},[(0,n.QD)("label",{for:"lastname2"},"IP - адрес узла"),(0,n.QD)("input",{id:"lastname2",type:"text",class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"})],-1),p=(0,n.QD)("div",{class:"field col"},[(0,n.QD)("label",{for:"lastname2"},"Участок связи"),(0,n.QD)("input",{id:"lastname2",type:"text",class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"})],-1),b={class:"field col mt-3 align-content-end justify-content-end"},m=(0,n.QD)("div",null," Лицевой счет",-1),Q=(0,n.QD)("span",null,"Заявка",-1),v={class:"flex flex-wrap justify-content-end"};var _={__name:"ProactiveUI",setup(e){const a=i(),t=((0,d.Ou)(a),(0,o.IL)([])),l=(0,o.IL)(!1),_=(0,o.IL)(""),A=async(e,t,n)=>{l.value=!0,_.value=n,await a.loadUnits(e,t)};return(0,n.u2)((async()=>{await a.loadMainTable()})),(e,d)=>{const i=(0,n.E1)("Button"),T=(0,n.E1)("Panel"),h=(0,n.E1)("Column"),D=(0,n.E1)("DataTable"),y=(0,n.E1)("Dialog");return(0,n.Wz)(),(0,n.An)("div",s,[(0,n.K2)(T,{header:"Фильтр",toggleable:"",collapsed:"false",class:"w-full"},{default:(0,n.Ql)((()=>[(0,n.QD)("div",c,[u,f,p,(0,n.QD)("div",b,[(0,n.K2)(i,{label:"Показать"})])])])),_:1}),(0,n.K2)(D,{expandedRows:t.value,"onUpdate:expandedRows":d[0]||(d[0]=e=>t.value=e),value:(0,o.KV)(a).getMetrics,dataKey:"ID",tableStyle:"min-width: 60rem"},{expansion:(0,n.Ql)((e=>[(0,n.K2)(D,{value:e.data.METRIC,size:"small"},{default:(0,n.Ql)((()=>[(0,n.K2)(h,{field:"NAME"},{header:(0,n.Ql)((()=>[(0,n.mY)(" Название метрики ")])),body:(0,n.Ql)((e=>[(0,n.QD)("span",null,(0,r.WA)(e.data.NAME),1)])),_:2},1024),(0,n.K2)(h,{field:"LAST_DATE"},{header:(0,n.Ql)((()=>[(0,n.mY)(" Последняя проверка ")])),body:(0,n.Ql)((e=>[(0,n.QD)("span",null,(0,r.WA)(e.data.LAST_DATE),1)])),_:2},1024),(0,n.K2)(h,{field:"COUNT"},{header:(0,n.Ql)((()=>[(0,n.mY)(" Колличество отклонений ")])),body:(0,n.Ql)((e=>[(0,n.QD)("span",null,(0,r.WA)(e.data.COUNT),1)])),_:2},1024),(0,n.K2)(h,{field:"LAST_METRIC"},{header:(0,n.Ql)((()=>[(0,n.mY)(" Текущее значение ")])),body:(0,n.Ql)((e=>[(0,n.QD)("span",null,(0,r.WA)(e.data.LAST_METRIC),1)])),_:2},1024),(0,n.K2)(h,{field:"history"},{header:(0,n.Ql)((()=>[(0,n.mY)(" История ")])),body:(0,n.Ql)((e=>[(0,n.K2)(i,{label:"Посмотреть",link:"",onClick:a=>A(e.data.ABONENT_ID,e.data.METRIC_ASUO,e.data.NAME)},null,8,["onClick"])])),_:2},1024)])),_:2},1032,["value"])])),default:(0,n.Ql)((()=>[(0,n.K2)(h,{expander:"",style:{width:"5rem"}}),(0,n.K2)(h,{field:"ABONENT"},{header:(0,n.Ql)((()=>[m])),body:(0,n.Ql)((e=>[(0,n.mY)((0,r.WA)(e.data.ABONENT),1)])),_:1}),(0,n.K2)(h,{field:"IP"},{header:(0,n.Ql)((()=>[(0,n.mY)(" IP - адрес узла ")])),body:(0,n.Ql)((e=>[(0,n.mY)((0,r.WA)(e.data.IP),1)])),_:1}),(0,n.K2)(h,{field:"PORT"},{header:(0,n.Ql)((()=>[(0,n.mY)(" Порт узла ")])),body:(0,n.Ql)((e=>[(0,n.mY)((0,r.WA)(e.data.PORT),1)])),_:1}),(0,n.K2)(h,{field:"DROP_METRIC"},{header:(0,n.Ql)((()=>[(0,n.mY)(" Отклонение Метрик ")])),body:(0,n.Ql)((e=>[(0,n.mY)((0,r.WA)(e.data.DROP_METRIC),1)])),_:1}),(0,n.K2)(h,{field:"abonentAddress"},{header:(0,n.Ql)((()=>[(0,n.mY)(" Адрес подключения ")])),body:(0,n.Ql)((e=>[(0,n.mY)((0,r.WA)(e.data.abonentAddress),1)])),_:1}),(0,n.K2)(h,{field:"DEAL_ID"},{header:(0,n.Ql)((()=>[Q])),body:(0,n.Ql)((e=>[(0,n.QD)("span",null,(0,r.WA)(e.data.DEAL_ID>0?e.data.DEAL_ID:""),1)])),_:1}),(0,n.K2)(h,{style:{width:"5rem"}},{header:(0,n.Ql)((()=>[])),body:(0,n.Ql)((e=>[(0,n.QD)("div",v,[(0,n.K2)(i,{icon:"pi pi-file-edit",size:"small",text:""})])])),_:1})])),_:1},8,["expandedRows","value"]),(0,n.K2)(y,{visible:l.value,"onUpdate:visible":d[1]||(d[1]=e=>l.value=e),header:"Метрика "+_.value,style:{width:"50rem"},modal:!0,draggable:!1},{default:(0,n.Ql)((()=>[(0,n.K2)(D,{value:(0,o.KV)(a).getUnitsTable,size:"small"},{default:(0,n.Ql)((()=>[(0,n.K2)(h,{field:"DATE_CREATE"},{header:(0,n.Ql)((()=>[(0,n.mY)(" Дата проверки ")])),body:(0,n.Ql)((e=>[(0,n.QD)("span",null,(0,r.WA)(e.data.DATE_CREATE),1)])),_:1}),(0,n.K2)(h,{field:"NEW_VALUE"},{header:(0,n.Ql)((()=>[(0,n.mY)(" Текущее значение ")])),body:(0,n.Ql)((e=>[(0,n.QD)("span",null,(0,r.WA)(e.data.NEW_VALUE),1)])),_:1}),(0,n.K2)(h,{field:"NEW_VALUE"},{header:(0,n.Ql)((()=>[(0,n.mY)(" Старое значение ")])),body:(0,n.Ql)((e=>[(0,n.QD)("span",null,(0,r.WA)(e.data.OLD_VALUE),1)])),_:1}),(0,n.K2)(h,{field:"DIFF_VALUE"},{header:(0,n.Ql)((()=>[(0,n.mY)(" Разница ")])),body:(0,n.Ql)((e=>[(0,n.QD)("span",null,(0,r.WA)(e.data.DIFF_VALUE?e.data.DIFF_VALUE:""),1)])),_:1})])),_:1},8,["value"])])),_:1},8,["visible","header"])])}}};const A=_;var T=A,h={__name:"App",setup(e){return(e,a)=>{const t=(0,n.E1)("TabPanel"),l=(0,n.E1)("TabView");return(0,n.Wz)(),(0,n.Az)(l,null,{default:(0,n.Ql)((()=>[(0,n.K2)(t,{header:"Проактивный Сервис"},{default:(0,n.Ql)((()=>[(0,n.K2)((0,o.KV)(T))])),_:1}),(0,n.K2)(t,{header:"Аварии / ППР"})])),_:1})}}};const D=h;var y=D,E=t(9476),K=t(9716),w=t(8724),O=t(1588),x=t(8830),I=t(7540),g=t(4432),W=t(3868),L=t(3716),U=t(5520),C=t(6960),P=t(2664),Y=t(9552),M=t(5160),N=t(100);const R=(0,l.W0)(y),V=(0,d.Kw)();R.use(V),R.use(E.cp),R.use(K.c),R.component("TreeTable",P.c),R.component("DataTable",Y.c),R.component("Column",M.c),R.component("Button",x.c),R.component("Toast",I.c),R.component("TabPanel",O.c),R.component("TabView",w.c),R.component("Avatar",g.c),R.component("Toolbar",W.c),R.component("Card",L.c),R.component("Panel",U.c),R.component("Dialog",N.c),R.component("InputText",C.c),R.mount("#app")}},a={};function t(l){var n=a[l];if(void 0!==n)return n.exports;var o=a[l]={exports:{}};return e[l].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(a,l,n,o){if(!l){var r=1/0;for(c=0;c<e.length;c++){l=e[c][0],n=e[c][1],o=e[c][2];for(var d=!0,i=0;i<l.length;i++)(!1&o||r>=o)&&Object.keys(t.O).every((function(e){return t.O[e](l[i])}))?l.splice(i--,1):(d=!1,o<r&&(r=o));if(d){e.splice(c--,1);var s=n();void 0!==s&&(a=s)}}return a}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[l,n,o]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var l in a)t.o(a,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,l){var n,o,r=l[0],d=l[1],i=l[2],s=0;if(r.some((function(a){return 0!==e[a]}))){for(n in d)t.o(d,n)&&(t.m[n]=d[n]);if(i)var c=i(t)}for(a&&a(l);s<r.length;s++)o=r[s],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(c)},l=self["webpackChunkproactive_front"]=self["webpackChunkproactive_front"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))}();var l=t.O(void 0,[999],(function(){return t(3192)}));l=t.O(l)})();
//# sourceMappingURL=app.0d0fc9f8.js.map